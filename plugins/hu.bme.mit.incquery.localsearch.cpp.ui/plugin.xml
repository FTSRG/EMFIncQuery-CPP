<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
	  <extension
        point="org.eclipse.ui.menus">
     <menuContribution
           allPopups="false"
           locationURI="popup:org.eclipse.jdt.ui.PackageExplorer">
        <menu
              label="Generate query code...">
           <command
                 commandId="hu.bme.mit.incquery.localsearch.cpp.ui.generateRuntime"
                 style="push">
              <visibleWhen>
                 <with
                       variable="selection">
                    <iterate
                          ifEmpty="false">
                       <reference
                             definitionId="hu.bme.mit.incquery.localsearch.cpp.ui.testEiqExtension">
                       </reference>
                    </iterate>
                 </with>
              </visibleWhen>
           </command>
           <command
                 commandId="hu.bme.mit.incquery.localsearch.cpp.ui.generateIterator"
                 style="push">
              <visibleWhen>
                 <with
                       variable="selection">
                    <iterate
                          ifEmpty="false">
                       <reference
                             definitionId="hu.bme.mit.incquery.localsearch.cpp.ui.testEiqExtension">
                       </reference>
                    </iterate>
                 </with>
              </visibleWhen>
           </command>
        </menu>
     </menuContribution>
  </extension>
  <extension
        point="org.eclipse.core.expressions.definitions">
     <definition
           id="hu.bme.mit.incquery.localsearch.cpp.ui.testEiqExtension">
        <adapt
              type="org.eclipse.core.resources.IResource">
           <test
                 property="org.eclipse.core.resources.extension"
                 value="eiq">
           </test>
        </adapt>
     </definition>
  </extension>
  <extension
        point="org.eclipse.ui.commands">
     <command
           defaultHandler="hu.bme.mit.incquery.localsearch.cpp.ui.GeneratorExecutableExtensionFactory:hu.bme.mit.incquery.localsearch.cpp.ui.handler.RuntimeGeneratorHandler"
           id="hu.bme.mit.incquery.localsearch.cpp.ui.generateRuntime"
           name="Runtime based">
     </command>
     <command
           defaultHandler="hu.bme.mit.incquery.localsearch.cpp.ui.GeneratorExecutableExtensionFactory:hu.bme.mit.incquery.localsearch.cpp.ui.handler.IteratorGeneratorHandler"
           id="hu.bme.mit.incquery.localsearch.cpp.ui.generateIterator"
           name="Iterator based">
     </command>
  </extension>
</plugin>
