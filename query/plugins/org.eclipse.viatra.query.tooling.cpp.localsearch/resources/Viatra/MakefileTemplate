##############################################################################
# M A K E F I L E
#
# NAME: Viatra
#
##############################################################################

PROTOBUF_INCLUDE_DIR=D:\libraries\protobuf-3.0.0\src

CXX=clang++
CXXFLAGS=-O0 -g -std=c++14 -Wall -Wextra -Wno-microsoft-include -pedantic -fms-compatibility-version=19.00 -fexceptions
INCLUDEFLAGS=-I. -I../ -I$(PROTOBUF_INCLUDE_DIR)
LFLAGS=
MAKE=make
LIBS=

COMPILE=$(CXX) $(INCLUDEFLAGS) $(CXXFLAGS) -c -o $@ $<
LINK=$(CXX) $(LFLAGS) -o $@ $^ $(LIBS)

.SUFFIXES:
.SUFFIXES: .cpp .h .o

SOURCES := $(wildcard *.cpp) $(wildcard */*.cpp) $(wildcard */*/*.cpp)
OBJECTS := $(SOURCES:%.cpp=%.o)
BINARY := ../bin/viatra.out

%.o:	%.cpp
		$(COMPILE)
		
$(BINARY): $(OBJECTS)
		$(LINK)
		
.PHONY: all
all: $(SOURCES) $(OBJECTS) $(BINARY)

.PHONY: clean
clean:
	rm -f $(OBJECTS) $(BINARY)
